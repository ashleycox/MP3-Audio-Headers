# MP3 Audio Headers
 Generates speech samples and header files for Arduino TTS

I created this bash script for use with the Arduino Simple TTS library by [Phil Schatzmann](https://github.com/pschatzmann/arduino-simple-tts). The script provides text to speech output using pre-recorded audio samples, and can utilise c headers stored in program memory to remove the necessity for any external storage on microcontrollers like the ESP32.

The script will take an input text file in which each line represents an individual sample. It creates AIFF or WAV files using the say command, converts them to mp3 using ffmpeg, uses xxd to produce c header files from those mp3s, and creates the necessary C array to use the files in a sketch with the library.

##usage:
create.sh outputdir format list samplerate bitdepth

The script takes 5 optional arguments:

- OUTPUTDIR - The location for the output files and folders. defaults to the current working directory
- Format - the format of the files generated by the say command. This option allows you to generate wav files on linux or AIFF on OSX.
- LIST - The samples list. Defaults to samples.txt in the current working directory
- SAMPLERATE - the sample rate of the MP3 files and thus the generated headers. Defaults to 24000
- BITDEPTH - The bit depth of the generated MP3 files, and thus the generated headers. Defaults to 32k.

##Dependencies

The script was written and tested under MacOS12. You will need to have ffmpeg installed which you can do with Homebrew. The syntax is simple and should work under linux, though changing the say command output format might be required.

##To Do

- add parameters to change the export format
- add parameters to change the voice, rate and pitch
- add ability to skip steps where files are already present
- add interactive option

